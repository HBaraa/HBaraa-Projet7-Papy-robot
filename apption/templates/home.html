<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <title>GrandPyBot</title>

</head>

<body>
    <nav class="col-12 navbar navbar-expand" id="mainNav" class="text-center">
        <div class="container bg-dark">
            <div class="col-12">
                <div class="row">
                    <div class="col-6">
                        <div class="row">
                            <img src="../static/images/papy.png" widtnavbar-darkh="50" height="40" alt="Info Logo" />
                            <p style="color:#2275e2;">Avec Papy-Robot chaque endroit a une histoire </p>
                        </div>
                    </div>
                    <div id="navbarContent">
                        <ul class=" navbar-nav ">
                            <li class=" nav-item active">
                                <a class="nav-link" href='http://127.0.0.1:5000/'>GrandPyBot</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="startpresent" type="click_on" style="visibility: visible;"
                                    href="#presentation">Qui suis-je?</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </nav>
    <!--end of Navigation bar-->
    <div class="container">
        <div class="home" id="home" style=" visibility:visible ">
            <div class="row">
                <div class="card">
                    <div class="col-lg-12">
                        <div class="jumbotron">
                            <h1 style="color:#0026ff;">Bienvenue chez GrandPy!</h1>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="card">
                    <img src="../static/images/papy.png" alt="grandpa" class="card-img-top">
                    <div class="card-body">
                        <div class="panel-body">
                            <div id="chat-box" class="chats">
                                <div class="chat chat-left">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <form id="user-text-form">
                        <div class="input-group">
                            <input id="question" name="question" type="text" maxlength="100"
                                class="form-control question"
                                placeholder="Dis moi mon petit comment Papy peut t'aider et où désires-tu aller ?"
                                required>
                            <span class="input-group-btn">
                                <button class="btn btn-secondary" id="demand" type="submit">Chercher</button>
                            </span>
                        </div>
                    </form>
                </div>
            </div>
            <div class="description">
                <div class="card">
                    <div class="card-body">
                        <hr class="star-light">
                        <div class="description" id="description" name="description"></div>
                    </div>
                </div>
                <div class=" row">
                    <div class="card" style="position:absolute; bottom: 150px; left:18%;">
                        <div class="col">
                            <h3 style="color:#00a2ff">Si vous êtes perdus alors papy-robot peut vous ramener où vous
                                voulez
                            </h3>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="presentation" style=" visibility:hidden; position:absolute; left: 20%; top:25%;">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="card" style="background-color: rgb(119, 220, 238);">
                            <img src="../static/images/me.png" alt=" me" class="card-img-top"
                                style="width: 100px; height: 100px;">
                            <div class="card-body">
                                <h4 class="text-center" style=" color:#2a1baf;">Hamdi Baraa</h4>
                                <hr class="star-light">
                                <h5 class="text-center" style="font-style: italic;"> <strong>
                                        Ingénieure
                                        mécatronicienne
                                        et étudiante chez
                                        OpenClasrooms </strong></h5>
                                <hr class="star-light">
                                <p class="text-center" style="font-style: italic">J'ai réalisé ce projet avec une
                                    grande
                                    motivation dans le cadre
                                    du projet
                                    7
                                    du parcours de développeur d'application chez OpenClassrooms</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="grandpa" class="grandpa" style=" visibility:hidden;  position:absolute; left: 20%; top:25%;">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="card" style="background-color: rgb(233, 124, 151);">
                            <div class="col-lg-12">
                                <h1>Search result </h1>
                                <p id="information" class="information">{{information}}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <footer class="text-center">
            <div class="footer-below" style="position:absolute; bottom: 0px; right:45%;">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12">
                            <hr class="star-light">
                            <span class="italic">Professional accounts : </span>
                            <ul class="list-unstyled">
                                <li>
                                    <a href="https://github.com/HBaraa" class="btn-social btn-outline"
                                        target="_blank">Github<i class="fa fa-fw fa-github"></i></a>
                                </li>
                                <li>
                                    <a href="https://www.linkedin.com/in/baraa-hamdi-294682178/"
                                        class="btn-social btn-outline" target="_blank">LinkedIn</a>
                                </li>
                            </ul>
                            <hr class="star-light">
                            <span class="italic">Copyright &copy; <a
                                    href="https://github.com/HBaraa/HBaraa-Projet7-Papy-robot" target="_blank">Hamdi
                                    Baraa</a> </span>
                        </div>
                    </div>
                </div>
            </div>
        </footer>

        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
         
        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
            integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
            crossorigin="anonymous"></script>

            
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
            integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
            crossorigin="anonymous"></script>

            
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
            integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
            crossorigin="anonymous"></script>
        <!-- Core theme JS-->
        <script>
            let form = document.querySelector("#user-text-form");
            let description = document.querySelector("#description");
            let accueil = document.querySelector("#home");
            let show_info = document.querySelector("#grandpa");
            show_info.style.visibility = "hidden";
            let showtext = "";
            let papiresp = "";
            function postFormData(url, data) {
                return fetch(url, {
                    method: "POST",
                    body: document.querySelector("#question").value,
                    headers: {
                        "Content-type": "plain/text"
                    }
                })
                    .then(response => response.json())
                    .catch(error => console.error());
            }
            form.addEventListener("submit", function (event) {
                event.preventDefault();
                postFormData("/ajax", new FormData(form))
                    .then(response => {
                        console.log(response);
                        if (response == "") {
                            showtext = "Bonjour mon petit, j'ai pas compris ce que tu m'as dit.Dis à papi clairement tu cherche quel endroit";
                            papiresp = "Ok papi, je reformulerais ma demande";
                            console.log(showtext);
                            linkref = "http://127.0.0.1:5000/"
                            show_info.style.visibility = "hidden";
                        } else {
                            let paragraph = "";
                            for (let word of response) {
                                paragraph += word;
                                paragraph += " ";
                            }
                            showtext = "Papi a compris que tu cherche " + paragraph + ". Attends mon poussin papi va te trouver cet endroit ";
                            papiresp = "Ok papi merci pour votre compréhension";
                            linkref = "#grandpa";
                        }
                        let newtext = document.createTextNode(showtext);
                        description.append(newtext);
                        description.style.visibility = "visible";
                        var btn = document.createElement("button");
                        var t = document.createTextNode(papiresp);       // Créer un noeud textuel
                        btn.appendChild(t);                                // Ajouter le texte au bouton
                        document.body.appendChild(btn);
                        btn.style.position = "absolute";
                        btn.style.bottom = "350px";
                        btn.style.left = "1300px";
                        btn.addEventListener("click", function (event) {
                            event.preventDefault();
                            newtext.remove();
                            btn.remove();
                            location.href = linkref;
                            description.style.visibility = "hidden";
                            accueil.style.visibility = "hidden";
                            if (response == "") {
                                pass;
                            } else { show_info.style.visibility = "visible"; }
                        })
                    })

            });
            let startpresent = document.querySelector("#startpresent");
            let present = document.querySelector("#presentation");
            startpresent.addEventListener("click", function (event) {
                event.preventDefault();
                accueil.style.visibility = "hidden";
                present.style.visibility = "visible";
            })


        </script>

</body>

</html>